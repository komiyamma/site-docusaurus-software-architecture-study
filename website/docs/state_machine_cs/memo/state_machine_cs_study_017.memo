テーブル駆動でswitch地獄を解決。遷移表を(State, Event) -> Nextの辞書として扱い、仕様とコードを一致させ、禁止遷移も自然に表現する。