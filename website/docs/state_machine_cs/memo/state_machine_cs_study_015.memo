enumとswitchを用いた最小構成の状態機械実装を行う。基本状態とイベントを定義し、禁止遷移をResultで返す仕組みを含め、実際に動作するコードを作成する。