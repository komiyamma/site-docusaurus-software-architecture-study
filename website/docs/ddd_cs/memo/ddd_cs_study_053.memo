C#型システムでルールを表現し「if地獄」を解消する手法を解説。専用型を定義し不正を未然に防ぎ保守性を向上。区分や状態を型に閉じ込め、AI指示も容易にする書き方を伝授