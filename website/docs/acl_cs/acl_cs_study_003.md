# ç¬¬3ç« ï¼šé–¢å¿ƒã®åˆ†é›¢ï¼ˆSoCï¼‰ã ã‘å…ˆã«æŠ¼ã•ãˆã‚‹ï¼ˆACLã®å‰æï¼‰ğŸšªğŸ§ 


## ã“ã®ç« ã§ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ ğŸ¯âœ¨

* ã€Œæ··ãœã¡ã‚ƒãƒ€ãƒ¡ï¼ã€ãªç†ç”±ã‚’ã€**è‡ªåˆ†ã®è¨€è‘‰ã§èª¬æ˜**ã§ãã‚‹ ğŸ—£ï¸
* ã‚³ãƒ¼ãƒ‰ã‚’ **UI / ã‚¢ãƒ—ãƒª / ãƒ‰ãƒ¡ã‚¤ãƒ³ / å¤–éƒ¨I/O** ã«åˆ†ã‘ã¦è€ƒãˆã‚‰ã‚Œã‚‹ ğŸ§©
* ACLï¼ˆè…æ•—é˜²æ­¢å±¤ï¼‰ãŒ **ã©ã®â€œå¢ƒç•Œâ€ã«ç«‹ã¤ã®ã‹**ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ãã‚‹ ğŸ§±ğŸŒŠ

---

## 3-1. SoCï¼ˆé–¢å¿ƒã®åˆ†é›¢ï¼‰ã£ã¦ãªã«ï¼ŸğŸ§¼

SoCï¼ˆSeparation of Concernsï¼‰ã¯ä¸€è¨€ã§ã„ã†ã¨â€¦

> **ã€Œå½¹å‰²ã®é•ã†ã‚‚ã®ã‚’ã€åŒã˜å ´æ‰€ã«æ··ãœãªã„ã€**ãƒ«ãƒ¼ãƒ«ã§ã™ âœ‹ğŸ§©

ãŸã¨ãˆã°ã€æ–™ç†ã§ã„ã†ã¨â€¦

* ã¾ãªæ¿ã§åˆ‡ã‚‹ï¼ˆä¸‹ã”ã—ã‚‰ãˆï¼‰ğŸ”ª
* ãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³ã§ç„¼ãï¼ˆèª¿ç†ï¼‰ğŸ³
* ãŠçš¿ã«ç››ã‚‹ï¼ˆç››ã‚Šä»˜ã‘ï¼‰ğŸ½ï¸

ã“ã‚Œã‚’å…¨éƒ¨ã€Œã¾ãªæ¿ã®ä¸Šã§ã‚„ã‚‹ã€ã¨ã€ã‚«ã‚ªã‚¹ã§ã™ã‚ˆã­ğŸ˜‡
ã‚³ãƒ¼ãƒ‰ã‚‚åŒã˜ã§ã€å½¹å‰²ãŒæ··ã–ã‚‹ã¨å£Šã‚Œã‚„ã™ããªã‚Šã¾ã™ã€‚([ã‚¦ã‚£ã‚­ãƒšãƒ‡ã‚£ã‚¢][1])

---

## 3-2. ã€Œæ··ãœã‚‹ã€ã¨ä½•ãŒèµ·ãã‚‹ã®ï¼ŸğŸ˜µâ€ğŸ’«âš¡ï¼ˆæœ€çŸ­ã§ä½“æ„Ÿï¼‰

### ã‚ˆãã‚ã‚‹â€œæ··ãœæ··ãœåœ°ç„â€ã®ä¾‹ ğŸ”¥

ã€Œæ³¨æ–‡ã‚’ä½œã‚‹å‡¦ç†ã€ã®ä¸­ã«ã€ã“ã‚“ãªã®ãŒå…¨éƒ¨å…¥ã£ã¦ã‚‹ã¨â€¦ğŸ‘‡

* ç”»é¢å…¥åŠ›ã®ãƒã‚§ãƒƒã‚¯ï¼ˆUIã®éƒ½åˆï¼‰ğŸ–¥ï¸
* æ±ºæ¸ˆAPIå‘¼ã³å‡ºã—ï¼ˆå¤–éƒ¨I/Oï¼‰ğŸŒ
* JSONã®è§£æï¼ˆå¤–éƒ¨å½¢å¼ï¼‰ğŸ“¦
* DBä¿å­˜ï¼ˆå¤–éƒ¨I/Oï¼‰ğŸ—„ï¸
* ã€Œæ³¨æ–‡ã¨ã¯ä½•ã‹ã€ã®ãƒ«ãƒ¼ãƒ«ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ï¼‰ğŸ“˜

ã“ã®çŠ¶æ…‹ã ã¨â€¦

* æ±ºæ¸ˆAPIãŒä»•æ§˜å¤‰æ›´ â†’ **æ³¨æ–‡ãƒ­ã‚¸ãƒƒã‚¯ã¾ã§å·»ãæ·»ãˆ**ğŸ’¥
* UIã®é …ç›®ãŒå¢—ãˆãŸ â†’ **ãƒ“ã‚¸ãƒã‚¹å‡¦ç†ã¾ã§æ”¹ä¿®**ğŸŒ€
* ãƒ†ã‚¹ãƒˆã—ãŸã„ â†’ **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚„DBãŒé‚ªé­”**ğŸ˜‡

ã¤ã¾ã‚Šã€ã€Œå¤–å´ã®éƒ½åˆã€ã§å†…å´ï¼ˆå¤§äº‹ãªãƒ«ãƒ¼ãƒ«ï¼‰ãŒè…ã£ã¦ã„ãã¾ã™ğŸ§Ÿâ€â™€ï¸ğŸ§¼

---

## 3-3. 4ã¤ã®â€œéƒ¨å±‹â€ã§è€ƒãˆã‚‹ğŸ ğŸ§ ï¼ˆUI / ã‚¢ãƒ—ãƒª / ãƒ‰ãƒ¡ã‚¤ãƒ³ / å¤–éƒ¨I/Oï¼‰

![é–¢å¿ƒã®åˆ†é›¢ã¨4ã¤ã®å±¤](./picture/acl_cs_study_003_soc.png)

ã“ã®æ•™æã§ã¯ã€ã¾ãšã“ã®4éƒ¨å±‹ã§è€ƒãˆã¾ã™âœ¨

| éƒ¨å±‹ï¼ˆå±¤ï¼‰                   | å½¹å‰²             | å…·ä½“ä¾‹                                   |
| ----------------------- | -------------- | ------------------------------------- |
| UIï¼ˆPresentationï¼‰ğŸ–¥ï¸     | å…¥åŠ›ã‚’å—ã‘å–ã‚Šã€çµæœã‚’è¿”ã™  | Controller / API Endpoint / ViewModel |
| ã‚¢ãƒ—ãƒªï¼ˆApplicationï¼‰ğŸ§­      | æ‰‹é †ã‚’é€²ã‚ã‚‹ï¼ˆãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼‰ | `PlaceOrder`ï¼ˆæ³¨æ–‡ã™ã‚‹æ‰‹é †ï¼‰                  |
| ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆDomainï¼‰ğŸ’          | ãƒ«ãƒ¼ãƒ«ã®ä¸­å¿ƒï¼ˆæ„å‘³ï¼‰     | æ³¨æ–‡ã®çŠ¶æ…‹ã€åˆè¨ˆé‡‘é¡ã®æ‰±ã„ã€åˆ¶ç´„                      |
| å¤–éƒ¨I/Oï¼ˆInfrastructureï¼‰ğŸŒ | å¤–ã®ä¸–ç•Œã¨è©±ã™        | DBã€HTTPã€ãƒ•ã‚¡ã‚¤ãƒ«ã€æ™‚è¨ˆã€å¤–éƒ¨API                 |

ãƒã‚¤ãƒ³ãƒˆã¯ã“ã‚ŒğŸ‘‡

* **ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯æœ€å¼·ã«å¤§äº‹**ğŸ’
* **å¤–éƒ¨I/Oã¯æ°—ã¾ãã‚Œ**ï¼ˆä»•æ§˜å¤‰æ›´ãƒ»ä¸å®‰å®šãƒ»é…ã„ï¼‰ğŸŒªï¸
* ã ã‹ã‚‰ **æ··ãœãªã„**ï¼ğŸ§±âœ¨

---

## 3-4. ACLã¯ã©ã“ã«ç«‹ã¤ã®ï¼ŸğŸ§±ğŸŒŠï¼ˆSoCã¨ã®é–¢ä¿‚ï¼‰

ACLï¼ˆAnti-Corruption Layer / è…æ•—é˜²æ­¢å±¤ï¼‰ã¯ã€ã–ã£ãã‚Šè¨€ã†ã¨

> **ã€Œå¤–éƒ¨ã®è¨€è‘‰ãƒ»ã‚¯ã‚»ã€ã‚’ã€Œè‡ªåˆ†ãŸã¡ã®è¨€è‘‰ã€ã«ç¿»è¨³ã—ã¦ã€å†…å´ã‚’å®ˆã‚‹å£**ğŸ§±âœ¨

å¤–éƒ¨ã¨å†…å´ã®é–“ã«ç«‹ã£ã¦ã€ç¿»è¨³ãƒ»å¤‰æ›ãƒ»å¸åã‚’ã™ã‚‹å±¤ã§ã™ã€‚([Microsoft Learn][2])

---

## 3-5. ã¾ãšã¯â€œç·šå¼•ãå›³â€ã‚’ä½œã‚ã†âœï¸ğŸ—ºï¸ï¼ˆãƒãƒ³ã‚ºã‚ªãƒ³ï¼‰

### 3-5-1. ã„ã£ãŸã‚“ã€ã“ã‚Œã‚’ç´™ã«æ›¸ãï¼ˆè¶…ãŠã™ã™ã‚ï¼‰ğŸ“âœ¨

ç´™ã§ã‚‚ãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªã§ã‚‚OKï¼ã¾ãšã¯å›³ã§ç†è§£ã—ã¡ã‚ƒãŠã†ğŸ¥°

```mermaid
flowchart TD
    UI[UI] --> App[Application]
    App --> Domain[Domain]
    UI --> Infra["Infrastructure / External I/O"]
    App -->|å¿…è¦ã«ãªã£ãŸã‚‰| Infra
    Infra --> External["å¤–éƒ¨API / DB"]
    ACL["[ ACL ]<br/>å¤–éƒ¨ã®ã‚¯ã‚»ã‚’å¸åã—ã¦<br/>å†…å´ã‚’å®ˆã‚‹ç¿»è¨³ä¿‚"] -.-> Infra
```

### å›³ã®èª­ã¿æ–¹ï¼ˆã“ã“å¤§äº‹ï¼‰ğŸ‘€

* **UI**ï¼šå…¥åŠ›å—ä»˜ã¨è¡¨ç¤ºæ‹…å½“ï¼ˆäººé–“ã¨è©±ã™ï¼‰ğŸ–¥ï¸
* **Application**ï¼šæ‰‹é †æ‹…å½“ï¼ˆæ³¨æ–‡â†’æ±ºæ¸ˆâ†’ä¿å­˜ã€ã¿ãŸã„ãªæµã‚Œï¼‰ğŸ§­
* **Domain**ï¼šæ„å‘³æ‹…å½“ï¼ˆæ³¨æ–‡ã®ãƒ«ãƒ¼ãƒ«ã€çŠ¶æ…‹ã®å¤‰åŒ–ï¼‰ğŸ’
* **Infrastructure**ï¼šå¤–éƒ¨ã¨è©±ã™æ‹…å½“ï¼ˆDB/HTTPãªã©ï¼‰ğŸŒ
* **ACL**ï¼šå¤–éƒ¨ã®ã‚¯ã‚»ã‚’å¸åã—ã¦ã€å†…å´ã‚’å®ˆã‚‹ç¿»è¨³ä¿‚ğŸ§±

---

## 3-6. â€œä»•åˆ†ã‘ã‚²ãƒ¼ãƒ â€ğŸ‘€ğŸ§¾ï¼ˆå†…å´ã«å…¥ã‚Œã¦ã„ã„ï¼Ÿãƒ€ãƒ¡ï¼Ÿï¼‰

æ¬¡ã®è¦ç´ ã‚’ã€ã©ã®éƒ¨å±‹ã«ç½®ãã¹ãã‹ä»•åˆ†ã‘ã—ã¦ã¿ã¦ã­ğŸ‘‡âœ¨

### ä»•åˆ†ã‘ãƒªã‚¹ãƒˆï¼ˆä¾‹ï¼‰ğŸ’

* `HttpClient` ğŸŒ
* `JsonSerializer` ğŸ“¦
* `Order`ï¼ˆæ³¨æ–‡ï¼‰ğŸ›’
* ã€Œæ³¨æ–‡ã¯åˆè¨ˆ0å††ã«ã§ããªã„ã€ğŸš«
* DBã®æ¥ç¶šæ–‡å­—åˆ— ğŸ”‘
* ã€Œæ±ºæ¸ˆãŒæˆåŠŸã—ãŸã‚‰æ³¨æ–‡ã‚’Paidã«ã™ã‚‹ã€âœ…
* APIã®å…¥åŠ›DTOï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆç”¨ï¼‰ğŸ“¥
* ä¾‹å¤–ãƒ­ã‚°å‡ºåŠ› ğŸ§¾

### ç›®å®‰ï¼ˆç­”ãˆã®æ–¹å‘æ€§ï¼‰ğŸ§­

* **å¤–éƒ¨I/Oå¯„ã‚Š**ï¼š`HttpClient` / JSON / DB / è¨­å®š / ãƒ­ã‚°
* **ãƒ‰ãƒ¡ã‚¤ãƒ³å¯„ã‚Š**ï¼š`Order` / ãƒ«ãƒ¼ãƒ«ï¼ˆã€œã—ã¦ã¯ã„ã‘ãªã„ï¼‰
* **ã‚¢ãƒ—ãƒªå¯„ã‚Š**ï¼šæˆåŠŸã—ãŸã‚‰Paidã«ã™ã‚‹â€¦ã¿ãŸã„ãªã€Œæ‰‹é †ã€
* **UIå¯„ã‚Š**ï¼šå…¥åŠ›DTOã€ç”»é¢éƒ½åˆã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

---

## 3-7. â€œæ··ãœæ··ãœã‚³ãƒ¼ãƒ‰â€ã‚’è¦‹ã¦ã€åˆ†å‰²ã™ã‚‹ï¼ˆãƒŸãƒ‹æ¼”ç¿’ï¼‰ğŸ§ªğŸ§©

### 3-7-1. ã¾ãšã¯æ‚ªã„ä¾‹ï¼ˆã‚ã–ã¨æ··ãœã‚‹ï¼‰ğŸ˜ˆ

> ã€Œã“ã†ãªã‚ŠãŒã¡ã€ã£ã¦ã„ã†ä¾‹ã ã‚ˆï¼è¦‹ã¦â€œæ··ã–ã£ã¦ã‚‹ç®‡æ‰€â€ã‚’æ¢ã—ã¦ã­ğŸ‘€

```csharp
public sealed class OrderService
{
    public async Task<string> PlaceOrderAsync(string memberId, decimal amount)
    {
        // UIéƒ½åˆã®ãƒã‚§ãƒƒã‚¯ã£ã½ã„ã‚‚ã®ï¼ˆæœ¬å½“ã¯UIå¯„ã‚Šï¼‰
        if (string.IsNullOrWhiteSpace(memberId)) return "memberId is required";

        // å¤–éƒ¨I/Oï¼ˆHTTPï¼‰
        using var http = new HttpClient();
        var json = await http.GetStringAsync($"https://legacy-pay.example/pay?m={memberId}&a={amount}");

        // å¤–éƒ¨å½¢å¼ï¼ˆJSONï¼‰ã«ä¾å­˜
        if (json.Contains("\"status\":\"ok\""))
        {
            // ãƒ‰ãƒ¡ã‚¤ãƒ³ã£ã½ã„çŠ¶æ…‹å¤‰æ›´ï¼ˆã§ã‚‚ãƒ‰ãƒ¡ã‚¤ãƒ³å‹ãŒç„¡ã„ï¼‰
            // DBä¿å­˜ï¼ˆå¤–éƒ¨I/Oï¼‰ã‚‚ã“ã“ã«å…¥ã£ã¦ããŒã¡â€¦
            return "Paid";
        }

        return "Failed";
    }
}
```

### ã©ã“ãŒâ€œæ··ã–ã£ã¦ã‚‹â€ï¼Ÿï¼ˆãƒã‚§ãƒƒã‚¯ï¼‰âœ…

* `HttpClient` ãŒã„ã‚‹ â†’ å¤–éƒ¨I/Oæ··å…¥ğŸŒ
* JSONæ–‡å­—åˆ—ã‚’ç›´ã«è§¦ã£ã¦ã‚‹ â†’ å¤–éƒ¨ä»•æ§˜ãŒç›´æ’ƒğŸ“¦
* ã€ŒPaidã€ãªã©çŠ¶æ…‹ãŒæ–‡å­—åˆ— â†’ ãƒ‰ãƒ¡ã‚¤ãƒ³ã®æ„å‘³ãŒå¼±ã„ğŸ’¦
* `using var HttpClient()` â†’ ãƒ†ã‚¹ãƒˆã—ã¥ã‚‰ã„ï¼†ç®¡ç†ã—ã¥ã‚‰ã„ğŸ˜‡

---

## 3-8. SoCã£ã½ãåˆ†ã‘ã‚‹ï¼ˆã“ã“ãŒã‚´ãƒ¼ãƒ«ï¼‰ğŸâœ¨

### 3-8-1. ã¾ãšã¯â€œå½¢â€ã ã‘åˆ†ã‘ã‚‹ï¼ˆã“ã®ç« ã§ã¯ã“ã“ã¾ã§ã§OKï¼‰ğŸ‘Œ

ã“ã“ã§ã¯ã€Œã¡ã‚ƒã‚“ã¨ã—ãŸACLã®å®Ÿè£…ã€ã¯ã¾ã å…ˆï¼
**ã¾ãšã¯ç·šå¼•ãã ã‘**ã‚„ã‚ã†ã­ğŸ§±âœ¨

#### âœ… ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆæ„å‘³ï¼‰å´ï¼šæ³¨æ–‡ã®çŠ¶æ…‹ã‚’å‹ã§æŒã¤ğŸ’

```csharp
public enum PaymentStatus
{
    Pending,
    Paid,
    Failed
}

public sealed class Order
{
    public string MemberId { get; }
    public decimal Amount { get; }
    public PaymentStatus Status { get; private set; } = PaymentStatus.Pending;

    public Order(string memberId, decimal amount)
    {
        if (string.IsNullOrWhiteSpace(memberId)) throw new ArgumentException("memberId is required");
        if (amount <= 0) throw new ArgumentException("amount must be positive");

        MemberId = memberId;
        Amount = amount;
    }

    public void MarkPaid() => Status = PaymentStatus.Paid;
    public void MarkFailed() => Status = PaymentStatus.Failed;
}
```

#### âœ… ã‚¢ãƒ—ãƒªï¼ˆæ‰‹é †ï¼‰å´ï¼šå¤–éƒ¨ã¸ã®ä¾å­˜ã¯â€œæŠ½è±¡â€ã«ã™ã‚‹ğŸ§­

```csharp
public interface IPaymentGateway
{
    Task<bool> PayAsync(string memberId, decimal amount);
}

public sealed class PlaceOrderUseCase
{
    private readonly IPaymentGateway _paymentGateway;

    public PlaceOrderUseCase(IPaymentGateway paymentGateway)
        => _paymentGateway = paymentGateway;

    public async Task<Order> ExecuteAsync(string memberId, decimal amount)
    {
        var order = new Order(memberId, amount);

        var ok = await _paymentGateway.PayAsync(memberId, amount);
        if (ok) order.MarkPaid();
        else order.MarkFailed();

        return order;
    }
}
```

#### âœ… å¤–éƒ¨I/Oå´ï¼šã“ã“ã«HTTPã‚„JSONãŒä½ã‚€ğŸŒ

ï¼ˆã“ã®ç« ã§ã¯â€œé›°å›²æ°—ã ã‘â€ã§OKï¼ï¼‰

```csharp
public sealed class LegacyPaymentGateway : IPaymentGateway
{
    private readonly HttpClient _http;

    public LegacyPaymentGateway(HttpClient http) => _http = http;

    public async Task<bool> PayAsync(string memberId, decimal amount)
    {
        var json = await _http.GetStringAsync($"https://legacy-pay.example/pay?m={memberId}&a={amount}");
        return json.Contains("\"status\":\"ok\"");
    }
}
```

ã“ã“ã¾ã§ã§ã€æœ€ä½é™ã“ã‚ŒãŒé”æˆã§ãã¦ã¾ã™ğŸ‰

* **ãƒ‰ãƒ¡ã‚¤ãƒ³ã« HttpClient ãŒå…¥ã£ã¦ãªã„**ğŸ’âœ¨
* å¤–éƒ¨ã®å¤‰æ›´ãŒã‚ã£ã¦ã‚‚ã€ã¾ãšå¤–å´ã‚’ç›´ã›ã°ã„ã„ğŸŒ
* ãƒ†ã‚¹ãƒˆã¯ `IPaymentGateway` ã‚’å·®ã—æ›¿ãˆã‚Œã°ã§ãã‚‹ğŸ”

â€» `HttpClient` ã®ç®¡ç†ã¯ `IHttpClientFactory` ãŒå®šç•ªã ã‚ˆï¼ˆå¾Œã®ç« ã§æ‰±ã„ã‚„ã™ããªã‚‹ã‚„ã¤ï¼‰ğŸ§°([Microsoft Learn][3])

---

## 3-9. ã€Œå†…å´ã«å…¥ã‚Œã¦ã„ã„ã‚‚ã® / ãƒ€ãƒ¡ãªã‚‚ã®ã€æ—©è¦‹è¡¨ğŸ§¾ğŸš«

### âœ… å†…å´ï¼ˆDomain / Applicationï¼‰ã«å…¥ã‚Œã¦ã„ã„ã‚‚ã®

* æ¥­å‹™ã®è¨€è‘‰ï¼šOrder / PaymentStatus ãªã©ğŸ›’
* ãƒ«ãƒ¼ãƒ«ï¼š0å††ç¦æ­¢ã€çŠ¶æ…‹é·ç§»ã®åˆ¶ç´„ãªã©ğŸš«
* æ‰‹é †ï¼šæ³¨æ–‡â†’æ±ºæ¸ˆâ†’çŠ¶æ…‹æ›´æ–°ï¼ˆãŸã ã—å¤–éƒ¨è©³ç´°ã¯çŸ¥ã‚‰ãªã„ï¼‰ğŸ§­
* æŠ½è±¡ï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰ï¼š`IPaymentGateway` ã¿ãŸã„ãªâ€œå£â€ğŸ‘„

### âŒ å†…å´ã«å…¥ã‚Œã¡ã‚ƒãƒ€ãƒ¡ãªã‚‚ã®ï¼ˆè…æ•—ã®ç¨®ï¼‰ğŸŒ±ğŸ§Ÿâ€â™€ï¸

* `HttpClient` / URL / ãƒ˜ãƒƒãƒ€ãƒ¼ / èªè¨¼æ–¹å¼ğŸŒ
* å¤–éƒ¨JSONã®å½¢å¼ãƒ»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åğŸ“¦
* DBãƒ†ãƒ¼ãƒ–ãƒ«åãƒ»SQLãƒ»æ¥ç¶šæ–‡å­—åˆ—ğŸ—„ï¸
* å¤–éƒ¨ã®ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã‚„ä¾‹å¤–å‹ï¼ˆãã®ã¾ã¾ï¼‰ğŸ’¥

---

## 3-10. AIæ´»ç”¨ï¼ˆã“ã®ç« ã®ãŠã™ã™ã‚ï¼‰ğŸ¤–âœ¨

### å›³ã®èª¬æ˜æ–‡ã‚’AIã«ä½œã‚‰ã›ã‚‹ğŸ“

ã‚³ãƒ”ãƒšã—ã¦ä½¿ãˆã‚‹ä¾‹ğŸ‘‡

* ã€Œã“ã®å›³ï¼ˆUIâ†’Applicationâ†’Domainâ†’Infrastructureï¼‰ã®èª¬æ˜æ–‡ã‚’ã€åˆå¿ƒè€…å‘ã‘ã«200å­—ã§ã€
* ã€Œã“ã®ä»•åˆ†ã‘ãƒªã‚¹ãƒˆã‚’ UI/Application/Domain/Infrastructure ã«åˆ†é¡ã—ã¦ã€ç†ç”±ã‚‚ä¸€è¨€ãšã¤ã€
* ã€Œæ··ãœæ··ãœã‚³ãƒ¼ãƒ‰ã®å•é¡Œç‚¹ã‚’â€œãƒ†ã‚¹ãƒˆã—ã¥ã‚‰ã•/å¤‰æ›´ã«å¼±ã„/è²¬å‹™ãŒæ›–æ˜§â€ã®è¦³ç‚¹ã§ç®‡æ¡æ›¸ãã«ã—ã¦ã€

ã‚³ãƒ„ã¯ã“ã‚ŒğŸ’¡

* **AIã¯å©ãå°ä½œã‚Š**ãŒå¾—æ„
* **æœ€çµ‚åˆ¤æ–­ï¼ˆã©ã“ã«ç½®ãã‹ï¼‰ã¯äººé–“ãŒæ±ºã‚ã‚‹**ğŸ§ âœ¨

---

## 3-11. ãƒŸãƒ‹èª²é¡ŒğŸ“ğŸŒ¸

### èª²é¡ŒAï¼šä»•åˆ†ã‘è¡¨ã‚’ä½œã‚‹ï¼ˆ3åˆ†ï¼‰â±ï¸

è‡ªåˆ†ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­ã§ã€æ¬¡ã‚’10å€‹æ¢ã—ã¦åˆ†é¡ã—ã¦ã­ğŸ‘‡

* UIã£ã½ã„ã‚‚ã® 3ã¤ğŸ–¥ï¸
* å¤–éƒ¨I/Oã£ã½ã„ã‚‚ã® 3ã¤ğŸŒ
* ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ«ãƒ¼ãƒ«ã£ã½ã„ã‚‚ã® 2ã¤ğŸ’
* ã‚¢ãƒ—ãƒªã®æ‰‹é †ã£ã½ã„ã‚‚ã® 2ã¤ğŸ§­

### èª²é¡ŒBï¼šä¸€æ–‡ã§è¨€ã†ï¼ˆ30ç§’ï¼‰ğŸ—£ï¸

* ã€ŒSoCã¨ã¯ï¼¿ï¼¿ï¼¿ï¼¿ã€
* ã€ŒACLã¯ï¼¿ï¼¿ï¼¿ï¼¿ã‚’å®ˆã‚‹ãŸã‚ã«ã€ï¼¿ï¼¿ï¼¿ï¼¿ã™ã‚‹å±¤ã€

---

## 3-12. ç« æœ«ãƒã‚§ãƒƒã‚¯ï¼ˆâ—‹Ã—ï¼‰âœ…ğŸ¯

1. ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã« `HttpClient` ãŒã‚ã£ã¦ã‚‚ã€å‹•ããªã‚‰OK â†’ â—‹ or Ã—
2. ã€Œæ³¨æ–‡ã¯0å††ã«ã§ããªã„ã€ã¯UIã®é–¢å¿ƒ â†’ â—‹ or Ã—
3. å¤–éƒ¨APIã®JSONå½¢å¼ã¯å¤‰ã‚ã‚Šã†ã‚‹ã®ã§ã€å†…å´ã«ç›´çµã•ã›ã‚‹ã¨å±ãªã„ â†’ â—‹ or Ã—
4. ACLã¯å¤–éƒ¨ãƒ¢ãƒ‡ãƒ«ã‚’å†…å´ãƒ¢ãƒ‡ãƒ«ã¸ç¿»è¨³ã™ã‚‹å½¹ã«ãªã‚Šã‚„ã™ã„ â†’ â—‹ or Ã—

---

### æ¬¡ç« ã¸ã®â€œã¤ãªãŒã‚Šâ€ğŸ”—

SoCã§ã€Œæ··ãœãªã„ç·šã€ãŒå¼•ã‘ãŸã‚‰ã€æ¬¡ã¯ **å†…å´ã®è¨€è‘‰ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ã®ç”¨èªï¼‰**ã‚’æ•´ãˆã¦ã„ãã¾ã™ğŸ—£ï¸ğŸ“˜
ï¼ˆC# 14 ã¯ .NET 10 / Visual Studio 2026 ã§è©¦ã›ã‚‹ã‚ˆã€œï¼ï¼‰([Microsoft Learn][4])

[1]: https://en.wikipedia.org/wiki/Separation_of_concerns?utm_source=chatgpt.com "Separation of concerns"
[2]: https://learn.microsoft.com/en-us/azure/architecture/patterns/anti-corruption-layer?utm_source=chatgpt.com "Anti-corruption Layer pattern - Azure Architecture Center"
[3]: https://learn.microsoft.com/en-us/dotnet/core/extensions/httpclient-factory?utm_source=chatgpt.com "Use the IHttpClientFactory - .NET"
[4]: https://learn.microsoft.com/ja-jp/dotnet/csharp/whats-new/csharp-14?utm_source=chatgpt.com "C# 14 ã®æ–°æ©Ÿèƒ½"
